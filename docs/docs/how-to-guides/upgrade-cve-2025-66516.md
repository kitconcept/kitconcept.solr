---
myst:
  html_meta:
    "description": "Upgrade guide for CVE-2025-66516 Tika vulnerability fix"
    "property=og:description": "Upgrade guide for CVE-2025-66516 Tika vulnerability fix"
    "property=og:title": "Upgrade guide for CVE-2025-66516"
    "keywords": "Plone, kitconcept Solr, security, CVE, Tika, upgrade"
---

# Upgrade Guide: CVE-2025-66516 (Tika XXE Vulnerability)

This guide explains what changes are required after upgrading to address the CVE-2025-66516 vulnerability in Apache Tika.

This fix is included in `kitconcept.solr` version **2.0.0a8** and later. This guide applies to all version 2 users, as well as users upgrading from version 2.0.0a7 or earlier to later 2.x versions.

**Note for version 1.x alpha users:** Version 1.x was never officially released (the project transitioned directly to version 2 with the new repository structure). Users of the 1.x alpha versions are recommended to migrate to version 2, which can be done without any further changes.

## Background

CVE-2025-66516 is a critical XML External Entity (XXE) vulnerability in Apache Tika versions prior to 3.2.0. The fix involves upgrading to Solr 9.10 with an external Tika 3.2.3 server.

## Users on the Vanilla kitconcept.solr Image

You are using the vanilla image if your Docker Compose configuration references:

```yaml
solr:
  image: ghcr.io/kitconcept/solr
```

You will need to start running the Tika server as a separate service.
Check the project's `docker-compose.yml` for the current reference configuration.

Then pull the new `ghcr.io/kitconcept/solr` image and restart your services. The updated image includes:

- Solr 9.10 with the `extraction` module enabled
- Configuration to use an external Tika 3.2.3 server (patched against CVE-2025-66516)

By default, Solr will connect to the Tika server at http://tika:9998
You can override this using the `solr.tika.url` environment variable.

## Users with Custom Solr Images

If you've built custom Solr images based on this project, you'll need to rebuild your image with the updated configuration.

**Important:** The fix lies entirely in the configuration update, not in the `kitconcept.solr` Python package. You don't need to upgrade `kitconcept.solr` to fix this vulnerability.

The key configuration changes are:

1. **Solr version**: Upgrade to the newest Solr version (9.x). The base image should be `solr:9.10` or later in your Dockerfile.
2. **Environment variable**: Set `SOLR_MODULES=extraction` to enable the extraction module in Solr 9.x
3. **External Tika server**: Configure Tika as an external service using version 3.2.3 or later
4. **Remove embedded Tika**: The embedded Tika library directives are no longer needed in `solrconfig.xml`

Refer to the project's Solr configuration files and Docker Compose setup for implementation details.
